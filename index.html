<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Citizenship Curriculum Project Plan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Slate & Sky -->
    <!-- Application Structure Plan: The application is designed as an interactive single-page dashboard. The core is a dynamic Gantt chart timeline that provides a high-level visual overview of the entire project. Users can click on any task in the timeline to see detailed information in a modal window. This task-oriented structure allows for quick access to specifics (like owners, dates, and deliverables) without losing the context of the overall project flow. The structure includes distinct sections for Team Roles & Workload (with a data visualization), a detailed Phase Breakdown, and Key Milestones, all accessible via a top navigation bar. This design was chosen to cater to different user needs: a project manager can view the timeline, while a team member can drill down into specific phase deliverables. It prioritizes clarity and interactive exploration over a static, linear document. -->
    <!-- Visualization & Content Choices: Report Info: Team workload distribution (Michael/Luis ~80%, Iish ~15%, Kathy ~5%). Goal: Inform users of the planned effort distribution. Viz/Presentation: Doughnut Chart. Interaction: Hovering over segments shows the team member's name and workload percentage. Justification: A doughnut chart is an immediate and universally understood way to show parts of a whole, making the workload split instantly clear. Library: Chart.js (Canvas). Report Info: Project tasks with start/end dates and dependencies. Goal: Organize and visualize the project schedule over time. Viz/Presentation: HTML/CSS Gantt-style timeline. Interaction: Clicking on a task bar opens a modal with details. Justification: A Gantt view is the standard for project management, clearly showing task duration, overlap for parallel work, and sequencing for dependent tasks. Method: Custom JS with Tailwind CSS. Report Info: Detailed descriptions of SOW deliverables. Goal: Inform and Organize. Viz/Presentation: Accordion list. Interaction: Clicking a phase title expands it to show detailed tasks. Justification: An accordion prevents information overload by hiding details until requested, keeping the main view clean. Method: Custom JS. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .gantt-grid {
            display: grid;
            grid-template-columns: 150px repeat(10, 1fr);
            gap: 1px;
            background-color: #e2e8f0; /* slate-200 */
        }
        .gantt-header {
            background-color: #f1f5f9; /* slate-100 */
            padding: 0.5rem;
            text-align: center;
            font-size: 0.75rem;
            font-weight: 600;
            color: #475569; /* slate-600 */
            position: sticky;
            top: 64px;
            z-index: 10;
        }
        .gantt-task-name {
            background-color: #ffffff;
            padding: 0.5rem;
            font-size: 0.75rem;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            border-bottom: 1px solid #e2e8f0;
        }
        .gantt-row {
            display: contents;
        }
        .gantt-cell {
            background-color: #ffffff;
            border-bottom: 1px solid #e2e8f0;
            position: relative;
        }
        .gantt-bar {
            position: absolute;
            height: 75%;
            top: 12.5%;
            background-color: #38bdf8; /* sky-400 */
            border-radius: 0.25rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .gantt-bar:hover {
            opacity: 0.8;
            transform: scaleY(1.1);
        }
        .modal {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="text-slate-800">

    <!-- Header & Navigation -->
    <header class="bg-white shadow-md sticky top-0 z-20">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <span class="text-xl font-bold text-slate-700">Digital Citizenship Curriculum Project</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#timeline" class="text-slate-600 hover:bg-slate-100 hover:text-slate-900 px-3 py-2 rounded-md text-sm font-medium">Timeline</a>
                        <a href="#phases" class="text-slate-600 hover:bg-slate-100 hover:text-slate-900 px-3 py-2 rounded-md text-sm font-medium">Phases & Deliverables</a>
                        <a href="#team" class="text-slate-600 hover:bg-slate-100 hover:text-slate-900 px-3 py-2 rounded-md text-sm font-medium">Team & Workload</a>
                        <a href="#milestones" class="text-slate-600 hover:bg-slate-100 hover:text-slate-900 px-3 py-2 rounded-md text-sm font-medium">Key Milestones</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <select id="mobile-nav" class="bg-slate-100 border border-slate-300 rounded-md px-3 py-2 text-sm font-medium">
                        <option value="#timeline">Timeline</option>
                        <option value="#phases">Phases & Deliverables</option>
                        <option value="#team">Team & Workload</option>
                        <option value="#milestones">Milestones</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8">

        <!-- Project Overview -->
        <section id="overview" class="mb-12">
            <h1 class="text-3xl font-bold text-slate-800 mb-2">Project Plan & Timeline</h1>
            <p class="text-slate-600 max-w-4xl">This interactive dashboard outlines the detailed plan for the development of the California Youth Digital Citizenship and Literacy Curriculum, a collaboration between UCLA CTS and CDPH. The project officially runs from October 1, 2025, to June 30, 2026, with preliminary work starting September 15, 2025. Use this tool to track phases, deliverables, responsibilities, and key dates.</p>
        </section>

        <!-- Timeline Section -->
        <section id="timeline" class="mb-12">
            <h2 class="text-2xl font-bold text-slate-800 mb-4">Interactive Project Timeline</h2>
            <p class="text-slate-600 mb-6 max-w-4xl">This timeline provides a visual overview of the project's major tasks and phases. It illustrates how activities are scheduled, highlighting sequential dependencies and parallel workstreams. Click on any task bar to view more details, including owners, specific SOW deliverables, and dependencies.</p>
            <div class="bg-white p-4 rounded-lg shadow-lg overflow-x-auto">
                <div id="gantt-chart-container" class="min-w-[800px]"></div>
            </div>
        </section>

        <!-- Phases & Deliverables -->
        <section id="phases" class="mb-12">
            <h2 class="text-2xl font-bold text-slate-800 mb-4">Phases & Deliverables</h2>
             <p class="text-slate-600 mb-6 max-w-4xl">The project is organized into distinct phases, from initial research to final delivery. Each phase contains specific tasks and deliverables as outlined in the Scope of Work. Click on a phase below to expand its details and see the associated activities and outcomes.</p>
            <div id="phases-accordion" class="space-y-4"></div>
        </section>

        <!-- Team & Workload -->
        <section id="team" class="mb-12">
            <h2 class="text-2xl font-bold text-slate-800 mb-4">Team & Workload Distribution</h2>
            <p class="text-slate-600 mb-6 max-w-4xl">This project relies on the collaborative efforts of the entire team, with work distributed based on roles and expertise. The visualization below shows the estimated workload allocation, while the cards detail each member's primary responsibilities and contributions.</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="md:col-span-1 bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-lg font-semibold mb-4 text-center">Estimated Workload</h3>
                    <div class="chart-container relative mx-auto" style="max-width: 300px; height: 300px; max-height: 300px;">
                        <canvas id="workloadChart"></canvas>
                    </div>
                </div>
                <div class="md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h4 class="font-bold text-slate-800">Michael Corral & Luis Cisneros</h4>
                        <p class="text-sm text-sky-600 font-semibold">Project Co-Leads (~70-80%)</p>
                        <p class="text-sm text-slate-600 mt-2">Responsible for the majority of the "heavy lift" work, including literature review, curriculum drafting, lesson plan development, and day-to-day project management.</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h4 class="font-bold text-slate-800">Iish Ryaru</h4>
                        <p class="text-sm text-teal-600 font-semibold">Contributor & Advisor (~10-15%)</p>
                        <p class="text-sm text-slate-600 mt-2">Provides strategic guidance, particularly on policy alignment, educational systems integration, and review of materials for relevance and applicability in K-12 settings.</p>
                    </div>
                     <div class="bg-white p-6 rounded-lg shadow col-span-1 sm:col-span-2">
                        <h4 class="font-bold text-slate-800">Kathy Doe</h4>
                        <p class="text-sm text-amber-600 font-semibold">Content Expert & Advisor (~5%)</p>
                        <p class="text-sm text-slate-600 mt-2">Serves as a subject matter expert, offering critical feedback, content review, and expert guidance at key stages of curriculum development to ensure evidence-based rigor.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Key Milestones -->
        <section id="milestones" class="mb-12">
            <h2 class="text-2xl font-bold text-slate-800 mb-4">Key Milestones & Dates</h2>
            <p class="text-slate-600 mb-6 max-w-4xl">This section highlights the most critical deadlines and checkpoints for the project. These milestones are essential for keeping the project on track and ensuring timely completion of all contractual obligations with the CDPH.</p>
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <ul class="space-y-4">
                    <li class="flex items-start">
                        <div class="flex-shrink-0 w-8 h-8 bg-sky-100 text-sky-700 rounded-full flex items-center justify-center font-bold">1</div>
                        <div class="ml-4">
                            <p class="font-semibold">Project Start & Kickoff</p>
                            <p class="text-sm text-slate-600"><strong>Date:</strong> Sep 15 - Oct 10, 2025</p>
                            <p class="text-sm text-slate-500">Includes internal planning and the official kickoff meeting with CDPH to align on goals and expectations.</p>
                        </div>
                    </li>
                    <li class="flex items-start">
                        <div class="flex-shrink-0 w-8 h-8 bg-teal-100 text-teal-700 rounded-full flex items-center justify-center font-bold">2</div>
                        <div class="ml-4">
                            <p class="font-semibold">Literature Review & Outline Complete</p>
                            <p class="text-sm text-slate-600"><strong>Date:</strong> Dec 20, 2025</p>
                            <p class="text-sm text-slate-500">Completion of the foundational research and the detailed curriculum framework, which will guide all content development.</p>
                        </div>
                    </li>
                    <li class="flex items-start">
                        <div class="flex-shrink-0 w-8 h-8 bg-indigo-100 text-indigo-700 rounded-full flex items-center justify-center font-bold">3</div>
                        <div class="ml-4">
                            <p class="font-semibold">Draft Curriculum Submitted to CDPH</p>
                            <p class="text-sm text-slate-600"><strong>Date:</strong> May 31, 2026</p>
                            <p class="text-sm text-slate-500">Submission of the complete draft curriculum package, including all modules, lesson plans, and training materials for all grade bands, for official review.</p>
                        </div>
                    </li>
                    <li class="flex items-start">
                        <div class="flex-shrink-0 w-8 h-8 bg-rose-100 text-rose-700 rounded-full flex items-center justify-center font-bold">4</div>
                        <div class="ml-4">
                            <p class="font-semibold">Final Project Completion & Delivery</p>
                            <p class="text-sm text-slate-600"><strong>Date:</strong> June 30, 2026</p>
                            <p class="text-sm text-slate-500">Final, revised curriculum package delivered to CDPH, incorporating all feedback and marking the official end of the project term.</p>
                        </div>
                    </li>
                </ul>
            </div>
        </section>

    </main>

    <!-- Modal for Task Details -->
    <div id="taskModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 opacity-0 pointer-events-none">
        <div id="modalContent" class="modal-content bg-white rounded-lg shadow-xl w-full max-w-lg p-6 transform scale-95">
            <div class="flex justify-between items-start">
                <h3 id="modalTitle" class="text-xl font-bold text-slate-800">Task Details</h3>
                <button id="closeModal" class="text-slate-500 hover:text-slate-800">&times;</button>
            </div>
            <div class="mt-4 text-sm">
                <div class="mb-3">
                    <strong class="block text-slate-600">Duration:</strong>
                    <span id="modalDuration"></span>
                </div>
                <div class="mb-3">
                    <strong class="block text-slate-600">Owner(s):</strong>
                    <span id="modalOwner"></span>
                </div>
                <div class="mb-3">
                    <strong class="block text-slate-600">Description & SOW Link:</strong>
                    <p id="modalDetails" class="text-slate-700"></p>
                </div>
                <div>
                    <strong class="block text-slate-600">Dependencies:</strong>
                    <p id="modalDependencies" class="text-slate-700"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const projectData = {
                team: [
                    { name: "Michael Corral & Luis Cisneros", workload: 80, color: '#0ea5e9' }, // sky-500
                    { name: "Iish Ryaru", workload: 15, color: '#14b8a6' }, // teal-500
                    { name: "Kathy Doe", workload: 5, color: '#f59e0b' } // amber-500
                ],
                phases: [
                    {
                        name: "Phase 0: Project Initiation & Planning",
                        id: "phase0",
                        description: "Establish the project foundation, align with CDPH, and finalize the detailed work plan. This phase ensures all stakeholders have a shared understanding of the project's goals, scope, and timeline.",
                        color: 'bg-sky-500',
                        tasks: [
                            { id: 1, name: "Internal Kickoff & Detailed Planning", start: "2025-09-15", end: "2025-09-30", owner: ["Michael C.", "Luis C."], details: "Internal project planning, refinement of timeline, role clarification, and development of initial drafts for CDPH review. Corresponds to initial planning activities.", dependencies: [] },
                            { id: 2, name: "Official CDPH Kickoff", start: "2025-10-01", end: "2025-10-10", owner: ["Michael C.", "Luis C.", "Iish R."], details: "Formal kickoff meeting with CDPH stakeholders to align on the scope of work, deliverables, communication plan, and reporting schedule.", dependencies: ["Internal Planning"] }
                        ]
                    },
                    {
                        name: "Phase 1: Research & Framework Development",
                        id: "phase1",
                        description: "Conduct foundational research and develop the strategic framework that will guide all curriculum content. This includes a comprehensive literature review and the creation of a detailed curriculum outline.",
                        color: 'bg-teal-500',
                        tasks: [
                            { id: 3, name: "Literature Review", start: "2025-09-15", end: "2025-11-30", owner: ["Luis C.", "Michael C."], details: "Conduct an extensive literature review to establish an evidence-based foundation for the curriculum. SOW Deliverable 2.", dependencies: ["Internal Planning"] },
                            { id: 4, name: "Detailed Curriculum Outline", start: "2025-11-15", end: "2025-12-20", owner: ["Michael C.", "Luis C."], details: "Develop a detailed curriculum outline covering core modules and themes for all grade bands. SOW Deliverable 3.", dependencies: ["Literature Review"] }
                        ]
                    },
                    {
                        name: "Phase 2: Curriculum & Materials Development",
                        id: "phase2",
                        description: "The core 'heavy lift' phase involving the drafting of all curriculum content, including modules, lesson plans, and supplementary training materials, differentiated for each grade band.",
                        color: 'bg-indigo-500',
                        tasks: [
                            { id: 5, name: "Draft Curriculum Modules (All Bands)", start: "2026-01-02", end: "2026-04-30", owner: ["Michael C.", "Luis C."], details: "Draft content for 3-5 core modules, differentiated for grade bands TK-5, 6-8, and 9-12. SOW Item 1b & 1c.", dependencies: ["Curriculum Outline"] },
                            { id: 6, name: "Draft Lesson Plans (TK-5)", start: "2026-01-15", end: "2026-05-15", owner: ["Michael C.", "Luis C."], details: "Develop specific lesson plans for the TK-5 grade band. SOW Deliverable 4.", dependencies: ["Draft Modules"] },
                            { id: 7, name: "Draft Lesson Plans (6-8)", start: "2026-01-15", end: "2026-05-15", owner: ["Luis C.", "Michael C."], details: "Develop specific lesson plans for the 6-8 grade band. SOW Deliverable 5.", dependencies: ["Draft Modules"] },
                            { id: 8, name: "Draft Lesson Plans (9-12)", start: "2026-01-15", end: "2026-05-15", owner: ["Michael C.", "Luis C."], details: "Develop specific lesson plans for the 9-12 grade band. SOW Deliverable 6.", dependencies: ["Draft Modules"] },
                            { id: 9, name: "Develop Training Materials (All Bands)", start: "2026-03-01", end: "2026-05-20", owner: ["Luis C.", "Michael C."], details: "Create supporting training materials (e.g., slide decks, facilitator guides) for each grade band. SOW Deliverables 7, 8, 9.", dependencies: ["Draft Modules"] }
                        ]
                    },
                    {
                        name: "Phase 3: Review, Revision & Finalization",
                        id: "phase3",
                        description: "This phase focuses on refining the drafted materials through internal and external review cycles, incorporating feedback, and preparing the final, polished curriculum package for delivery.",
                        color: 'bg-amber-500',
                        tasks: [
                            { id: 10, name: "Expert & Internal Review", start: "2026-05-01", end: "2026-05-30", owner: ["All Team"], details: "Internal team and expert advisor (Kathy Doe) review of the complete draft curriculum package.", dependencies: ["All Drafts Complete"] },
                            { id: 11, name: "Submit Draft to CDPH", start: "2026-05-31", end: "2026-05-31", owner: ["Michael C.", "Luis C."], details: "Submit the complete draft curriculum package to CDPH for official feedback. SOW Deliverable 10.", dependencies: ["Internal Review"] },
                            { id: 12, name: "Incorporate CDPH Feedback & Finalize", start: "2026-06-01", end: "2026-06-25", owner: ["Michael C.", "Luis C."], details: "Revise all materials based on CDPH feedback and prepare the final deliverable package.", dependencies: ["Submit Draft to CDPH"] },
                            { id: 13, name: "Final Delivery to CDPH", start: "2026-06-30", end: "2026-06-30", owner: ["Michael C.", "Luis C."], details: "Deliver the final, completed Youth Digital Citizenship and Literacy curriculum package. SOW Deliverable 10.", dependencies: ["Incorporate Feedback"] }
                        ]
                    },
                    {
                        name: "Phase 4: Communication & Dissemination (Ongoing)",
                        id: "phase4",
                        description: "This ongoing workstream runs parallel to the main project phases, focusing on creating materials to support the dissemination and promotion of the project and its outputs.",
                        color: 'bg-purple-500',
                        tasks: [
                            { id: 14, name: "Develop Co-Branded Comms Materials", start: "2025-10-15", end: "2026-06-30", owner: ["Michael C.", "Luis C."], details: "Ongoing development of co-branded materials (press releases, newsletters, social media posts) to support project dissemination. SOW Deliverable 11.", dependencies: ["Official CDPH Kickoff"] }
                        ]
                    }
                ]
            };

            const allTasks = projectData.phases.flatMap(p => p.tasks.map(t => ({ ...t, phaseColor: p.color, phaseName: p.name })));
            
            // Workload Chart
            const workloadCtx = document.getElementById('workloadChart').getContext('2d');
            new Chart(workloadCtx, {
                type: 'doughnut',
                data: {
                    labels: projectData.team.map(t => t.name),
                    datasets: [{
                        label: 'Workload Distribution',
                        data: projectData.team.map(t => t.workload),
                        backgroundColor: projectData.team.map(t => t.color),
                        borderColor: '#ffffff',
                        borderWidth: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '60%',
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed + '%';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });

            // Gantt Chart
            const ganttContainer = document.getElementById('gantt-chart-container');
            const projectStartDate = new Date('2025-09-01');
            const projectEndDate = new Date('2026-07-31');
            const months = [];
            let currentDate = new Date(projectStartDate);
            while (currentDate <= projectEndDate) {
                months.push(new Date(currentDate));
                currentDate.setMonth(currentDate.getMonth() + 1);
            }

            const totalDays = (projectEndDate - projectStartDate) / (1000 * 60 * 60 * 24);
            
            let ganttHTML = '<div class="gantt-grid" style="grid-template-columns: 200px repeat(' + (months.length -1) +', 1fr);">';
            ganttHTML += '<div class="gantt-header">Task</div>';
            months.slice(0, -1).forEach(month => {
                ganttHTML += `<div class="gantt-header">${month.toLocaleString('default', { month: 'short' })} '${month.getFullYear().toString().slice(-2)}</div>`;
            });
            
            allTasks.sort((a,b) => new Date(a.start) - new Date(b.start)).forEach(task => {
                ganttHTML += `<div class="gantt-row">`;
                ganttHTML += `<div class="gantt-task-name" title="${task.name}">${task.name}</div>`;
                months.slice(0, -1).forEach((month, index) => {
                    const nextMonth = months[index+1];
                    const taskStart = new Date(task.start);
                    const taskEnd = new Date(task.end);

                    const start = new Date(Math.max(month, taskStart));
                    const end = new Date(Math.min(nextMonth, taskEnd));

                    if(start < end){
                        const monthDays = (nextMonth - month) / (1000 * 60 * 60 * 24);
                        const left = ((start - month) / (1000 * 60 * 60 * 24)) / monthDays * 100;
                        const width = ((end - start) / (1000 * 60 * 60 * 24)) / monthDays * 100;

                         ganttHTML += `<div class="gantt-cell"><div class="gantt-bar ${task.phaseColor}" style="left:${left}%; width:${width}%" data-task-id="${task.id}"></div></div>`;
                    } else {
                        ganttHTML += `<div class="gantt-cell"></div>`;
                    }
                });
                ganttHTML += `</div>`;
            });

            ganttHTML += '</div>';
            ganttContainer.innerHTML = ganttHTML;

            // Phases Accordion
            const accordionContainer = document.getElementById('phases-accordion');
            let accordionHTML = '';
            projectData.phases.forEach(phase => {
                accordionHTML += `
                    <div class="bg-white rounded-lg shadow-md overflow-hidden">
                        <button class="accordion-toggle w-full p-4 text-left font-semibold text-slate-800 flex justify-between items-center hover:bg-slate-50 transition">
                            <span>${phase.name}</span>
                            <span class="transform transition-transform duration-300">&#9662;</span>
                        </button>
                        <div class="accordion-content max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                            <div class="p-4 border-t border-slate-200">
                                <p class="text-sm text-slate-600 mb-4">${phase.description}</p>
                                <ul class="list-disc pl-5 space-y-2 text-sm">
                                    ${phase.tasks.map(task => `<li><strong>${task.name}:</strong> <span class="text-slate-500">${task.details}</span></li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    </div>
                `;
            });
            accordionContainer.innerHTML = accordionHTML;
            
            document.querySelectorAll('.accordion-toggle').forEach(button => {
                button.addEventListener('click', () => {
                    const content = button.nextElementSibling;
                    const arrow = button.querySelector('span:last-child');
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                        arrow.style.transform = 'rotate(0deg)';
                    } else {
                        document.querySelectorAll('.accordion-content').forEach(c => c.style.maxHeight = null);
                         document.querySelectorAll('.accordion-toggle span:last-child').forEach(a => a.style.transform = 'rotate(0deg)');
                        content.style.maxHeight = content.scrollHeight + "px";
                        arrow.style.transform = 'rotate(180deg)';
                    }
                });
            });


            // Modal Logic
            const modal = document.getElementById('taskModal');
            const modalContent = document.getElementById('modalContent');
            const closeModalBtn = document.getElementById('closeModal');

            ganttContainer.addEventListener('click', function(e) {
                if (e.target.classList.contains('gantt-bar')) {
                    const taskId = parseInt(e.target.dataset.taskId);
                    const task = allTasks.find(t => t.id === taskId);
                    
                    if (task) {
                        document.getElementById('modalTitle').textContent = task.name;
                        document.getElementById('modalDuration').textContent = `${task.start} to ${task.end}`;
                        document.getElementById('modalOwner').textContent = task.owner.join(', ');
                        document.getElementById('modalDetails').textContent = task.details;
                        document.getElementById('modalDependencies').textContent = task.dependencies.length > 0 ? task.dependencies.join(', ') : 'None';
                        
                        modal.classList.remove('opacity-0', 'pointer-events-none');
                        modalContent.classList.remove('scale-95');
                    }
                }
            });

            closeModalBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeModal();
                }
            });

            function closeModal() {
                modal.classList.add('opacity-0');
                modalContent.classList.add('scale-95');
                 setTimeout(() => {
                    modal.classList.add('pointer-events-none');
                }, 300);
            }

            // Smooth scrolling for nav links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                });
            });

            // Mobile nav
            document.getElementById('mobile-nav').addEventListener('change', function(e){
                 document.querySelector(e.target.value).scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
            });
        });
    </script>
</body>
</html>

